{"version":3,"sources":["webpack:///webpack/bootstrap 13f1b33dcdf19ecb615d","webpack:///./src/js/dynamic-navigation.js","webpack:///./src/js/normalize-href.js"],"names":["__webpack_require__","moduleId","installedModules","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","$","doDynamicNavigation","e","navLink","specificTitle","cached","hasNewContent","displayedNewContent","$elem","currentTarget","href","__WEBPACK_IMPORTED_MODULE_0__normalize_href__","attr","currentHref","preventDefault","cache","cacheUrl","$contentElem","addClass","not","removeClass","length","window","history","pushState","document","title","text","baseTitle","when","waitFor","then","loadingIndicator","state","append","done","ajaxData","newContent","html","remove","fail","location","ms","q","Deferred","setTimeout","resolve","first","getContentElem","exec","filter","this","on","jQuery","setAndValidateHref","normalizeElem","origin","pathname","search","hash","__webpack_exports__","createElement"],"mappings":"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","file":"cs-homepage.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 13f1b33dcdf19ecb615d","import { getDomainRelativeUrl, isRelativeHref } from './normalize-href';\r\n\r\n(function ($) {\r\n  'use strict';\r\n  var baseTitle, $contentElem, cache, currentHref, loadingIndicator;\r\n\r\n  // Only initialize dynamic navigation if HTML5 history APIs are available\r\n  if (window.history && window.history.pushState) {\r\n    $contentElem = getContentElem();\r\n\r\n    if ($contentElem) {\r\n      // The base title is all text up to the final \"-\", excluding trailing whitespace\r\n      baseTitle = (/(.*?)(?:\\s*-[^-]*)?$/).exec(document.title)[1];\r\n\r\n      // Initialize the content cache\r\n      cache = {};\r\n\r\n      // Initialize the navigation bindings\r\n      initializeNavigation();\r\n    }\r\n  }\r\n\r\n  function initializeNavigation() {\r\n    currentHref = getDomainRelativeUrl(location.href);\r\n\r\n    if (currentHref) {\r\n      cache[currentHref] = $contentElem.html();\r\n    }\r\n\r\n    // Bind local links in the header\r\n    $('.header-block a[href]').filter(function () {\r\n      return isRelativeHref($(this).attr('href'));\r\n    }).on('click', doDynamicNavigation);\r\n  }\r\n\r\n  function doDynamicNavigation(e) {\r\n    var $elem = $(e.currentTarget),\r\n        href = getDomainRelativeUrl($elem.attr('href')),\r\n        navLink,\r\n        specificTitle,\r\n        cached,\r\n        hasNewContent,\r\n        displayedNewContent;\r\n\r\n    // If the current href is the same as the one which was clicked, return\r\n    // and let the page reload. The rationale is that if the user is continuing\r\n    // to click, then the page probably hasn't been responding as desired.\r\n    if (currentHref === href)\r\n      return;\r\n\r\n    currentHref = href;\r\n\r\n    // If the href is null (perhaps because it was absolute) then return\r\n    // and let the default occur.\r\n    if (!href)\r\n      return;\r\n\r\n    // Stop the page from reloading\r\n    e.preventDefault();\r\n\r\n    // If the content for this page is already cached, then take the cached value.\r\n    // Otherwise, make a request for it.\r\n    cached = cache.hasOwnProperty(href);\r\n    if (cached) {\r\n      hasNewContent = [cache[href], 'success', null];\r\n    } else {\r\n      var cacheUrl = '/section-partial' + (href === '/' ? '/index.html' : href);\r\n      hasNewContent = $.get(cacheUrl);\r\n    }\r\n\r\n    // Fade out the content\r\n    $contentElem.addClass('fading faded-out');\r\n\r\n    // Update the links in the navbar\r\n    navLink = $('nav a[href=\"'+href+'\"]');\r\n    $('nav a[href]').not(navLink).removeClass('active-link');\r\n    if (navLink.length > 0) {\r\n      navLink.addClass('active-link');\r\n    } else {\r\n      navLink = null;\r\n    }\r\n\r\n    // Update the URL and document title\r\n    window.history.pushState(null, document.title, href);\r\n\r\n    specificTitle = (navLink || $elem).attr('data-pagetitle') || (navLink || $elem).text();\r\n    document.title = baseTitle + ' - ' + specificTitle;\r\n\r\n    // Wait for at least 500ms and for the new content to load\r\n    displayedNewContent = $.when(hasNewContent, waitFor(500));\r\n\r\n    // If loading takes at least 750ms then show a loading indicator\r\n    waitFor(750).then(function () {\r\n      if (loadingIndicator || displayedNewContent.state() !== 'pending')\r\n        return;\r\n\r\n      $contentElem.addClass('hidden');\r\n\r\n      loadingIndicator = $('<img src=\"home-assets/img/ajax-loading.gif\" class=\"loading-indicator\">');\r\n      $('body').append(loadingIndicator);\r\n    });\r\n\r\n    displayedNewContent.done(function (ajaxData) {\r\n      var newContent = ajaxData[0];\r\n\r\n      // Cache the content\r\n      if (!cached)\r\n        cache[href] = newContent;\r\n\r\n      // If the href has changed in the mean time then don't display the new content\r\n      if (currentHref !== href)\r\n        return;\r\n\r\n      // Load the content on the page\r\n      $contentElem.html(newContent);\r\n\r\n      // Remove the loading indicator if one was there\r\n      if (loadingIndicator) {\r\n        loadingIndicator.remove();\r\n        loadingIndicator = null;\r\n      }\r\n\r\n      // Fade in the content element\r\n      $contentElem.removeClass('faded-out hidden');\r\n\r\n      waitFor(500).then(function () {\r\n        $contentElem.removeClass('fading');\r\n      });\r\n    }).fail(function () {\r\n      // On failure just go to the referenced location\r\n      window.location = href;\r\n    });\r\n  }\r\n\r\n  function getContentElem() {\r\n    var $contentElem = $('section.content');\r\n    if ($contentElem.length === 0) return null;\r\n    if ($contentElem.length > 1) return $contentElem.first();\r\n    return $contentElem;\r\n  }\r\n\r\n  function waitFor(ms) {\r\n    var q = new $.Deferred();\r\n    setTimeout(function () {q.resolve();}, ms);\r\n    return q;\r\n  }\r\n})(jQuery);\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/dynamic-navigation.js\n// module id = 2\n// module chunks = 0","var normalizeElem = document.createElement('a');\r\n\r\n/**\r\n * Get a URL relative to the root of this domain for the URL referred to by\r\n * href. If href is from a a different origin, return null.\r\n */\r\nexport function getDomainRelativeUrl(href) {\r\n  if (!setAndValidateHref(href)) {\r\n    return null;\r\n  }\r\n\r\n  return normalizeElem.pathname + normalizeElem.search + normalizeElem.hash;\r\n}\r\n\r\n/**\r\n * Return true if the argument is a string which can be parsed as a URL in\r\n * the same origin as this document.\r\n */\r\nexport function isRelativeHref(href) {\r\n  return setAndValidateHref(href);\r\n}\r\n\r\nfunction setAndValidateHref(href) {\r\n  if (typeof href !== 'string') {\r\n    return false;\r\n  }\r\n  normalizeElem.href = href;\r\n  return normalizeElem.origin === location.origin;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/normalize-href.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}