/* cs-homepage v0.1.7-alpha, 2017-11-19
   Copyright (c) 2017 William Bain */
!function(a){"use strict";function b(){var b=a("nav a.active-link");b&&(k=e(b))&&(j[k]=i.html()),a(".header-block a[href]").filter(function(){return g(a(this).attr("href"))}).on("click",c)}function c(b){var c,d,g,m,n,o=a(b.currentTarget),p=e(o);"."===p&&(p="index.html"),k!==p&&(k=p,p&&(b.preventDefault(),g=j.hasOwnProperty(p),m=g?[j[p],"success",null]:a.get("section-partial/"+p),i.addClass("fading faded-out"),c=a('nav a[href="'+p+'"]'),a("nav a[href]").not(c).removeClass("active-link"),c.length>0?c.addClass("active-link"):c=null,window.history.pushState(null,document.title,p),d=(c||o).attr("data-pagetitle")||(c||o).text(),document.title=h+" - "+d,n=a.when(m,f(500)),f(750).then(function(){l||"pending"!==n.state()||(i.addClass("hidden"),l=a('<img src="home-assets/img/ajax-loading.gif" class="loading-indicator">'),a("body").append(l))}),n.done(function(a){var b=a[0];g||(j[p]=b),k===p&&(i.html(b),l&&(l.remove(),l=null),i.removeClass("faded-out hidden"),f(500).then(function(){i.removeClass("fading")}))}).fail(function(){window.location=p})))}function d(){var b=a("section.content");return 0===b.length?null:b.length>1?b.first():b}function e(a){var b=a.attr("href");return g(b)?b.replace(/^\s+|\s+$/g,""):null}function f(b){var c=new a.Deferred;return setTimeout(function(){c.resolve()},b),c}function g(a){return null!=a&&(""===a||/^\s*[^:]+(\/|\s*$)/.test(a))}var h,i,j,k,l;window.history&&window.history.pushState&&(i=d())&&(h=/(.*?)(?:\s*-[^-]*)?$/.exec(document.title)[1],j={},b())}(jQuery);
//# sourceMappingURL=cs-homepage.min.js.map