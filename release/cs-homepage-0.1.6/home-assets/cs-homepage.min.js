/* cs-homepage v0.1.6, 2014-11-27
   Copyright (c) 2014 William Bain */
!function(a){"use strict";function b(){var b;b=a("nav a.active-link"),b&&(k=e(b),k&&(j[k]=i.html())),a(".header-block a[href]").each(function(b,d){var e=a(d);g(e.attr("href"))&&e.on("click",c)})}function c(b){var c,d,g,m,n=a(b.currentTarget),o=e(n);k!==o&&(k=o,i&&o&&(b.preventDefault(),d=j.hasOwnProperty(o),g=d?[j[o],"success",null]:a.get("section-partial/"+o),i.addClass("fading"),i.addClass("faded-out"),c=a('nav a[href="'+o+'"]'),a("nav a[href]").not(c).removeClass("active-link"),c.length>0?c.addClass("active-link"):c=null,window.history.pushState(null,document.title,o),document.title=h+" - "+(c||n).text(),m=a.when(g,f(500)),f(750).then(function(){l||"pending"!==m.state()||(i.addClass("hidden"),l=a('<img src="home-assets/img/ajax-loading.gif" class="loading-indicator">'),a("body").append(l))}),m.done(function(a){var b=a[0];d||(j[o]=b),k===o&&(i.html(b),l&&(l.remove(),l=null),i.removeClass("faded-out hidden"),f(500).then(function(){i.removeClass("fading")}))}).fail(function(){window.location=o})))}function d(){var b=a("section.content");return 0===b.length?null:b.length>1?a(b[0]):b}function e(a){var b=a.attr("href");if(g(b))return b.replace(/^\s+|\s+$/g,"")}function f(b){var c=new a.Deferred;return setTimeout(function(){c.resolve()},b),c}function g(a){return a&&0!==a.length?/^\s*[^:/\s]+(\/|\s*$)/.test(a):!1}var h,i,j,k,l;window.history&&window.history.pushState&&(i=d(),i&&(h=/(.*?)(?:\s*-[^-]*)?$/.exec(document.title)[1],j={},b()))}(jQuery);
//# sourceMappingURL=cs-homepage.min.js.map