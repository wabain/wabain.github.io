/* cs-homepage v0.1.5, 2014-11-17
   Copyright (c) 2014 William Bain */
!function(a){"use strict";function b(){var b;b=a("nav a.active-link"),b&&(k=e(b),k&&(j[k]=i.html())),a("nav a[href]").each(function(b,d){var e=a(d);g(e.attr("href"))&&e.on("click",c)})}function c(b){var c,d,g,m=a(b.currentTarget),n=e(m);k!==n&&(k=n,i&&n&&(b.preventDefault(),c=j.hasOwnProperty(n),d=c?[j[n],"success",null]:a.get("section-partial/"+n),i.addClass("fading"),i.addClass("faded-out"),a("nav a.active-link").not(m).removeClass("active-link"),m.addClass("active-link"),window.history.pushState(null,document.title,n),document.title=h+" - "+m.text(),g=a.when(d,f(500)),f(750).then(function(){l||"pending"!==g.state()||(i.addClass("hidden"),l=a('<img src="home-assets/img/ajax-loading.gif" class="loading-indicator">'),a("body").append(l))}),g.done(function(a){var b=a[0];c||(j[n]=b),k===n&&(i.html(b),l&&(l.remove(),l=null),i.removeClass("faded-out hidden"),f(500).then(function(){i.removeClass("fading")}))}).fail(function(){window.location=n})))}function d(){var b=a("section.content");return 0===b.length?null:b.length>1?a(b[0]):b}function e(a){var b=a.attr("href");if(g(b))return b.replace(/^\s+|\s+$/g,"")}function f(b){var c=new a.Deferred;return setTimeout(function(){c.resolve()},b),c}function g(a){return a&&0!==a.length?/^\s*[^:/\s]+(\/|\s*$)/.test(a):!1}var h,i,j,k,l;window.history&&window.history.pushState&&(i=d(),i&&(h=/(.*?)(?:\s*-[^-]*)?$/.exec(document.title)[1],j={},b()))}(jQuery);
//# sourceMappingURL=cs-homepage.min.js.map